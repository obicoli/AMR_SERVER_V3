import merge from"ramda/es/merge";import TimeNavigator from"../../../_internal/components/time-navigator";import{componentFactory}from"@fusioncharts/core/src/lib";import panelConfig from"./_utils/panel-configurer";var DEFAULT_AXIS_X={orientation:"bottom",align:"bottom",visible:true,overlap:true,dayinmajor:true,stickycontextlabel:false,scalemode:"random",skipinfo:{minor:true},offset:{x:2,y:2}},DEFAULT_AXIS_Y={orientation:"left",align:"left",visible:true,overlap:false},hydrateX=merge(DEFAULT_AXIS_X),hydrateY=merge(DEFAULT_AXIS_Y);export default function(chart){var chartConfig=chart.config,contextAxesX=chartConfig.contextAxesX||[],contextAxesY=chartConfig.contextAxesY||[],contextPanels=(chartConfig.contextPanels||[]).map((function(panel){return merge(panel,{x:panel.x.map((function(xCfg){return merge(hydrateX(xCfg),panelConfig(contextAxesX,xCfg.index))})),y:panel.y.map((function(yCfg){return merge(hydrateY(yCfg),merge(panelConfig(contextAxesY,yCfg.index),{plottype:"line"}))}))})})),tableMap=chartConfig.contextTableMap;var values,mergedContextPanels,timeNavigator;values=chart.getFocusLimit();mergedContextPanels=contextPanels.map((function(cfg,i){var info=merge(cfg,{tableMap:tableMap,values:values});componentFactory(chart,TimeNavigator,"timeNavigator",chartConfig.navigatorEnabled?1:0,[{contextScale:info.x[i].scale.copy(),xConfigs:info.x,yConfigs:info.y,plotConfigs:info.plots,dataTable:info.dataTable,tableMap:info.tableMap,values:info.values}]);return info}));chartConfig.contextPanels=mergedContextPanels;if(timeNavigator=chart.getChildren("timeNavigator")&&chart.getChildren("timeNavigator")[0]){if(!timeNavigator||timeNavigator.getState("removed"))return;timeNavigator.attachHandlers();timeNavigator.addExtEventListener("focusLimitChanged",(function(){timeNavigator.config.values=chart.getFocusLimit();timeNavigator.asyncDraw()}),chart)}}