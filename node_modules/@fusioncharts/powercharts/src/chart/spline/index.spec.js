import FusionCharts from"../../../../fusioncharts/core";import chartType from"./index";import ignoreCaseExt from"../../../../fc-features/src/ignore-case-ext";import{setup,getSVG,CONTAINER_ID}from"../../../../../smoke-test/test-sanity/utility";FusionCharts.addDep(chartType);FusionCharts.addDep(ignoreCaseExt);var chartName=chartType.getName(),chartID=chartName.toLowerCase();describe("valueFontColor, valueBgColor, valueBorderColor",(function(){var chartObj;afterEach((function(){return chartObj.dispose()}));it("Without valueFontColor, valueBgColor and valueBorderColor, chart should render normally",(function(done){chartObj=setup(FusionCharts,{type:chartID,renderAt:CONTAINER_ID,width:600,height:350,dataSource:{chart:{caption:"Monthly",xaxisname:"Month",yaxisname:"Revenue",numberprefix:"$",showvalues:"1",animation:"0"},data:[{label:"Jan",value:"420000"},{label:"Feb",value:"910000"}]}});chartObj.addEventListener("renderComplete",(function(){var dataLabelGroup=document.querySelectorAll('[class$="fusioncharts-datalabels"]')[1],rects=dataLabelGroup.getElementsByTagName("rect"),texts=dataLabelGroup.getElementsByTagName("text");expect(rects.length).toBe(0);expect(texts.length).toBe(2);expect(texts[0].getAttribute("fill")).toBe("#555555");expect(texts[1].getAttribute("fill")).toBe("#555555");done()}));chartObj.render()}));it("valueFontColor, valueBgColor and valueBorderColor should work from data level",(function(done){chartObj=setup(FusionCharts,{type:chartID,renderAt:CONTAINER_ID,width:600,height:350,dataSource:{chart:{caption:"Monthly",xaxisname:"Month",yaxisname:"Revenue",numberprefix:"$",showvalues:"1",animation:"0"},data:[{label:"Jan",value:"420000",valuefontcolor:"ff0000",valuebgcolor:"fff000",valuebordercolor:"0000ff"},{label:"Feb",value:"910000"}]}});chartObj.addEventListener("renderComplete",(function(){var dataLabelGroup=document.querySelectorAll('[class$="fusioncharts-datalabels"]')[1],rects=dataLabelGroup.getElementsByTagName("rect"),texts=dataLabelGroup.getElementsByTagName("text");expect(rects.length).toBe(1);expect(texts.length).toBe(2);expect(rects[0].getAttribute("fill")).toBe("#fff000");expect(rects[0].getAttribute("stroke")).toBe("#0000ff");expect(texts[0].getAttribute("fill")).toBe("#ff0000");expect(texts[1].getAttribute("fill")).toBe("#555555");done()}));chartObj.render()}));it("valueFontColor, valueBgColor and valueBorderColor at data level should overwrite the same configurations at chart level",(function(done){chartObj=setup(FusionCharts,{type:chartID,renderAt:CONTAINER_ID,width:600,height:350,dataSource:{chart:{caption:"Monthly",xaxisname:"Month",yaxisname:"Revenue",numberprefix:"$",showvalues:"1",valuefontcolor:"00ff00",valuebordercolor:"ff0000",valuebgcolor:"ffffff",animation:"0"},data:[{label:"Jan",value:"420000",valuefontcolor:"ff0000",valuebgcolor:"fff000",valuebordercolor:"0000ff"},{label:"Feb",value:"910000"}]}});chartObj.addEventListener("renderComplete",(function(){var dataLabelGroup=document.querySelectorAll('[class$="fusioncharts-datalabels"]')[1],rects=dataLabelGroup.getElementsByTagName("rect"),texts=dataLabelGroup.getElementsByTagName("text");expect(rects.length).toBe(2);expect(texts.length).toBe(2);expect(rects[0].getAttribute("fill")).toBe("#fff000");expect(rects[0].getAttribute("stroke")).toBe("#0000ff");expect(rects[1].getAttribute("fill")).toBe("#ffffff");expect(rects[1].getAttribute("stroke")).toBe("#ff0000");expect(texts[0].getAttribute("fill")).toBe("#ff0000");expect(texts[1].getAttribute("fill")).toBe("#00ff00");done()}));chartObj.render()}))}));