module.exports=function(e){function t(o){if(n[o])return n[o].exports;var l=n[o]={exports:{},id:o,loaded:!1};return e[o].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){e.exports=n(970)},3:function(e,t){e.exports=function(){throw Error("define cannot be used indirect")}},962:function(e,t){e.exports=require("./formatblock")},970:function(e,t,n){var o,l,i;!function(a,define){l=[n(962),n(971)],o=a,i="function"==typeof o?o.apply(t,l):o,!(void 0!==i&&(e.exports=i))}(function(){!function(e,t){var n=window.kendo,o=e.extend,l=e.proxy,i=n.ui.editor,a=i.Dom,s=i.EditorUtils,r=i.RangeUtils,p=i.Command,c="kendoEditor",d="k-state-active",h="k-state-selected",m=i.Tool,u=i.ToolTemplate,f=i.InsertHtmlCommand,w=i.BlockFormatFinder,b=i.EditorUtils.registerTool,g=n.getTouches,_=n.template,x="<td style='width:#=width#%;'>#=content#</td>",C=new w([{tags:["table"]}]),v=f.extend({init:function(t){var n=e.extend({postProcess:this.postProcess,skipCleaners:!0},t||{});f.fn.init.call(this,n)},_tableHtml:function(e,t){var n,o;return e=e||1,t=t||1,n=_(x)({width:100/t,content:i.emptyTableCellContent}),o=100/e,"<table class='k-table' data-last>"+Array(e+1).join("<tr style='height:"+o+"%;'>"+Array(t+1).join(n)+"</tr>")+"</table>"},postProcess:function(t,n){var o=e("table[data-last]",t.document).removeAttr("data-last");n.setStart(o.find("td")[0],0),n.collapse(!0),t.selectRange(n)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),f.fn.exec.call(this)}}),T=m.extend({initialize:function(t,n){var o,a,r,p;m.fn.initialize.call(this,t,n),o=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:l(this._open,this),activate:l(this._activate,this),close:l(this._close,this)}).data("kendoPopup"),t.click(l(this._toggle,this)).keydown(l(this._keydown,this)),a=this._editor=n.editor,this._popup=o,r=new i.TableWizardTool({template:new u({template:s.tableWizardButtonTemplate,title:a.options.messages.tableWizard}),command:i.TableWizardCommand,insertNewTable:!0}),b("tableWizardInsert",r),p=e("<div class='k-editor-toolbar'>"+r.options.template.getHtml()+"</div>"),p.appendTo(o.element),a.toolbar&&a.toolbar.attachToolsEvents(p)},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(d)},_close:function(){this._popup.options.anchor.removeClass(d)},_keydown:function(e){var t=n.keys,o=e.keyCode;o==t.DOWN&&e.altKey?this._popup.open():o==t.ESC&&this._popup.close()},_toggle:function(t){var n=e(t.target).closest(".k-tool");n.hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){var t=this.popup();t.wrapper&&"block"==t.wrapper.css("display")&&t.close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),S=T.extend({init:function(t){this.cols=8,this.rows=6,T.fn.init.call(this,e.extend(t,{command:v,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function t(t){var n=e(window);return{row:Math.floor((t.clientY+n.scrollTop()-d.top)/l)+1,col:Math.floor((t.clientX+n.scrollLeft()-d.left)/o)+1}}var o,l,i=this,a=i._popup.element,s=a.find(".k-ct-cell"),r=s.eq(0),p=s.eq(s.length-1),d=n.getOffset(r),h=n.getOffset(p),m=i.cols,u=i.rows;a.find("*").addBack().attr("unselectable","on"),h.left+=p[0].offsetWidth,h.top+=p[0].offsetHeight,o=(h.left-d.left)/m,l=(h.top-d.top)/u,a.autoApplyNS(c).on("mousemove",".k-ct-cell",function(e){i._setTableSize(t(e))}).on("mouseleave",".k-ct-cell",function(){i._setTableSize()}).on("down",".k-ct-cell",function(e){e.preventDefault();var n=g(e)[0];i._exec(t(n.location))})},_valid:function(e){return e&&e.row>0&&e.col>0&&e.row<=this.rows&&e.col<=this.cols},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(t){var o=this._popup.element,l=o.find(".k-status"),i=o.find(".k-ct-cell"),a=this.cols,s=this._editor.options.messages;this._valid(t)?(l.text(n.format(s.createTableHint,t.row,t.col)),i.each(function(n){e(this).toggleClass(h,n%a<t.col&&n/a<t.row)})):(l.text(s.createTable),i.removeClass(h))},_keydown:function(e){var t,o,l,i,a,s,r,p;T.fn._keydown.call(this,e),this._popup.visible()&&(t=n.keys,o=e.keyCode,l=this._popup.element.find(".k-ct-cell"),i=Math.max(l.filter(".k-state-selected").last().index(),0),a=Math.floor(i/this.cols),s=i%this.cols,r=!1,o!=t.DOWN||e.altKey?o==t.UP?(r=!0,a--):o==t.RIGHT?(r=!0,s++):o==t.LEFT&&(r=!0,s--):(r=!0,a++),p={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,s+1))},o==t.ENTER?this._exec(p):this._setTableSize(p),r&&(e.preventDefault(),e.stopImmediatePropagation()))},_open:function(){var e=this._editor.options.messages;T.fn._open.call(this),this.popup().element.find(".k-status").text(e.createTable).end().find(".k-ct-cell").removeClass(h)},_close:function(){T.fn._close.call(this),this.popup().element.off("."+c)}}),y=p.extend({_clearColIndexAtrr:function(e){a.clearTableMappings(e,"col-index")},_mapColIndices:function(e){a.reMapTableColumns(e,"col-index")},_findRowSpanCell:function(t,n,o){var l,i,a;for(a=n;a>=0;a--)if(l=t.rows[a],i=e(l).find("[col-index="+o+"]"),i.length)return i},_resetTableResizing:function(e){e._destroyResizings(),e._initializeColumnResizing(),e._initializeRowResizing(),e._initializeTableResizing()},_findNextTdInRow:function(e,t){var n,o,l=e.find("td:last-child"),i=parseInt(l.attr("col-index"),10)+l.prop("colSpan")-1;for(o=t;o<=i;o++)if(n=e.find("[col-index="+o+"]"),n.length)return n}}),I=y.extend({exec:function(){var t,n,o,l,s,r,p,c,d=this.lockRange(!0),h=a.closest(d.endContainer,["td","th"]),m=a.closest(h,"table"),u=this.options.position||"after";if(!(!m||this.immutables()&&i.Immutables.immutableParent(h))){for(this._mapColIndices(m),n=h.parentNode,r=a.findNodeIndex(n,!0),h.rowSpan>1&&"after"===u&&(n=m.rows[r+h.rowSpan-1]),t=m.rows[0].cells.length,o=m.rows[0].cells[t-1],t=parseInt(o.getAttribute("col-index"),10)+o.colSpan-1,s=n.cloneNode(!0),e(s).empty(),c=0;c<=t;c+=l.prop("colSpan"))l=e(n).find("[col-index="+c+"]"),l.length?l.prop("rowSpan")>1&&"after"===u&&l?l.attr("rowspan",l.prop("rowSpan")+1):this._appendCell(s,l):(r=a.findNodeIndex(n,!0),l=this._findRowSpanCell(m,r,c),p=l.closest("tr").index(),p+l.prop("rowSpan")-1===r&&"after"===u?this._appendCell(s,l):l.attr("rowspan",l.prop("rowSpan")+1));"before"==u?a.insertBefore(s,n):a.insertAfter(s,n),this._clearColIndexAtrr(m),this.releaseRange(d),this._resetTableResizing(this.editor)}},_appendCell:function(e,t){var n;n=t.clone(),n.html(i.emptyTableCellContent),n.removeAttr("rowspan"),n.appendTo(e)}}),R=y.extend({exec:function(){var e,t,n,o,l=this.lockRange(!0),s=a.closest(l.endContainer,["td","th"]),r=a.closest(s,"table"),p=r&&r.rows,c=this.options.position||"after";if(!(!s||this.immutables()&&i.Immutables.immutableParent(s))){for(this._mapColIndices(r),e=parseInt(s.getAttribute("col-index"),10),s.colSpan>1&&"after"===c&&(s.setAttribute("col-index",e+s.colSpan-1),e=e+s.colSpan-1),t=0;t<p.length;t++)n=this._processForColSpan(p[t],e,c,s),n&&(o=n.cloneNode(),o.innerHTML=i.emptyTableCellContent,o.removeAttribute("colspan"),"before"==c?a.insertBefore(o,n):a.insertAfter(o,n),this._resizeCells(o,n));this._clearColIndexAtrr(r),this.releaseRange(l),this._resetTableResizing(this.editor)}},_processForColSpan:function(n,o,l,i){var a,s,r=o-1;if(a=e(n).find("[col-index="+o+"]")[0],a&&a.colSpan>1&&"after"===l&&a!==i)return a.colSpan+=1,t;if(a)return a;for(r;r>=0&&(a=e(n).find("[col-index="+r+"]")[0],!(a&&a.colSpan>1));r--);return a?(s=parseInt(a.getAttribute("col-index"),10)+a.colSpan-1,s===o&&"after"===l?a:(o<=s&&a.setAttribute("colspan",a.colSpan+1),t)):t},_resizeCells:function(e,t){var n,o,l,i=e.style.width;i&&(n=parseFloat(i),o=i.slice((""+n).length),l=n/2+o,e.style.width=l,t.style.width=l)}}),k=y.extend({exec:function(){var t,n,o,l=this.lockRange(),s=r.mapAll(l,function(t){return e(t).closest("tr")[0]}),p=a.closest(l.endContainer,["td","th"]),c=s[0],d=p?p.rowSpan:1,h=e(s[0]).index(),m=a.closest(c,"table");if(!(!m||this.immutables()&&i.Immutables.immutableParent(c))){for(n=0;n<d;n++)s.indexOf(m.rows[h+n])<0&&s.push(m.rows[h+n]);if(m.rows.length<=s.length)t=a.next(m),t&&!a.insignificant(t)||(t=a.prev(m)),a.remove(m),this._resetTableResizing(this.editor);else{for(this._mapColIndices(m),o=0;o<s.length;o++)c=s[o],a.removeTextSiblings(c),t=a.next(c)||a.prev(c),t=t.cells[0],this._handleRowSpanCells(m,c),a.remove(c);this._clearColIndexAtrr(m)}t&&(l.setStart(t,0),l.collapse(!0),this.editor.selectRange(l)),this._resetTableResizing(this.editor)}},_handleRowSpanCells:function(t,n){var o,l,i,s,r=a.findNodeIndex(n,!0),p=t.rows[0],c=p.cells[p.cells.length-1],d=parseInt(c.getAttribute("col-index"),10)+c.colSpan-1;for(o=0;o<=d;o+=l.prop("colSpan"))l=e(n).find("[col-index="+o+"]"),l.length&&l.prop("rowSpan")>1&&(s=t.rows[r+1],i=e(s).find("[col-index="+(o+1)+"]"),i.length?i.before(l):e(s).append(l),this._reduceRowSpan(l)),l.length||(l=this._findRowSpanCell(t,r,o),this._reduceRowSpan(l))},_reduceRowSpan:function(e){var t=e.prop("rowSpan")-1;t<=1?e.removeAttr("rowspan"):e.attr("rowspan",t)}}),A=y.extend({exec:function(){var t,n,o,l,s=this.lockRange(),r=a.closest(s.endContainer,["td","th"]),p=a.closest(r,"table"),c=p&&p.rows,d=a.findNodeIndex(r,!0),h=c&&c[0].cells.length;if(!(!r||this.immutables()&&i.Immutables.immutableParent(r))){if(1==h||r.colSpan==h)t=a.next(p),t&&!a.insignificant(t)||(t=a.prev(p)),a.remove(p),this._resetTableResizing(this.editor);else{for(a.removeTextSiblings(r),t=a.next(r)||a.prev(r),this._mapColIndices(p),d=parseInt(r.getAttribute("col-index"),10),l=0;l<r.colSpan;l++)for(n=0;n<c.length;n+=o.prop("rowSpan")||1)o=e(c[n]).find("[col-index="+(d+l)+"]"),o.length&&o.prop("colSpan")<=1?o.remove():this._handleColSpanCells(c[n],d+l);this._clearColIndexAtrr(p)}t&&(s.setStart(t,0),s.collapse(!0),this.editor.selectRange(s)),this._resetTableResizing(this.editor)}},_handleColSpanCells:function(n,o){var l,i,a=e(n).find("[col-index="+o+"]");if(a.length&&a.prop("colSpan")>1)return l=a.clone(!0),a.after(l),this._reduceColSpan(l),l.attr("col-index",parseInt(a.attr("col-index"),10)+1),a.remove(),t;for(i=o;i>=0;i--)if(a=e(n).find("[col-index="+i+"]"),a.length)return this._reduceColSpan(a),a.attr("col-index",parseInt(a.attr("col-index"),10)+1),t},_reduceColSpan:function(e){var t=e.prop("colSpan")-1;t<=1?e.removeAttr("colspan"):e.attr("colspan",t)}}),z=y.extend({exec:function(){var n,o,l,s,r=this.lockRange(),p=a.closest(r.endContainer,["td","th"]);if(p&&(n=a.closest(p,"table"),o=p.parentNode,l=a.findNodeIndex(p,!0),s=o.children[l+1],!this.immutables()||!i.Immutables.immutableParent(p))){if(this._mapColIndices(n),l=parseInt(e(p).attr("col-index"),10),s=e(o).find("[col-index="+(l+1+this._getColspan(p)-1)+"]").get(0),!s||s.rowSpan!==p.rowSpan)return this._clearColIndexAtrr(n),this.releaseRange(r),t;e(p).prop("colspan",this._getColspan(p)+this._getColspan(s)).append(a.emptyNode(s)?"":"<br/>"+s.innerHTML),e(p).width(p.offsetWidth),e(s).remove(),this._clearColIndexAtrr(n),this.releaseRange(r),this._resetTableResizing(this.editor)}},_getColspan:function(e){return parseInt(e.getAttribute("colspan"),10)||1}}),N=y.extend({exec:function(){var n,o,l,s,r,p,c=this.lockRange(),d=a.closest(c.endContainer,["td","th"]);if(d&&(n=a.closest(d,"tr"),o=a.closest(d,"table"),l=a.findNodeIndex(d,!0),s=a.findNodeIndex(n,!0),r=o.rows[s+this._getRowspan(d)],p=r&&r.children[l],!this.immutables()||!i.Immutables.immutableParent(d))){if(this._mapColIndices(o),l=e(d).attr("col-index"),p=e(r).find("[col-index="+l+"]").get(0),!p||p.colSpan!==d.colSpan)return this._clearColIndexAtrr(o),this.releaseRange(c),t;e(d).prop("rowspan",this._getRowspan(d)+this._getRowspan(p)).append(a.emptyNode(p)?"":"<br/>"+p.innerHTML),e(p).remove(),this._clearColIndexAtrr(o),this.releaseRange(c)}},_getRowspan:function(e){return parseInt(e.getAttribute("rowspan"),10)||1}}),M=y.extend({exec:function(){var t=this.lockRange(),n=this.options.type,o="row"===n?"colspan":"rowspan",l=a.closest(t.endContainer,["td","th"]),s=a.closest(l,"table"),r=a.createEmptyNode(this.editor.document,l.nodeName.toLowerCase());!l||this.immutables()&&i.Immutables.immutableParent(l)||(this._mapColIndices(s),"row"===n&&e(l).is("["+o+"]")?this._splitCellHorizontally(l,s,o,r):"column"===n&&e(l).is("["+o+"]")&&this._splitCellVertically(l,s,o,r),e(l).prop(o.toLowerCase())<=1&&e(l).removeAttr(o),this._clearColIndexAtrr(s),this.releaseRange(t))},_getRowspanValue:function(e){return parseInt(e.getAttribute("rowspan"),10)},_getColspanValue:function(e){return parseInt(e.getAttribute("colspan"),10)},_splitCellHorizontally:function(t,n,o,l){var i=t.rowSpan,a=t.colSpan,s=e(l),r=Math.floor(a/2);r>1&&s.attr("colspan",r),i>1&&s.attr("rowspan",i),e(t).prop(o,a-r).after(s),e(t).width(t.offsetWidth),s.width(s[0].offsetWidth)},_splitCellVertically:function(t,n,o,l){var i=a.closest(t,"tr"),s=parseInt(e(t).attr("col-index"),10),r=a.findNodeIndex(i,!0),p=t.rowSpan,c=t.colSpan,d=Math.floor(p/2),h=e(n).find("tr").eq(r+p-d),m=this._findNextTdInRow(h,s+c),u=e(l);d>1&&u.attr("rowspan",d),c>1&&u.attr("colspan",c),m&&m.length?m.before(u):h.append(u),e(t).prop(o,p-d)}}),H=m.extend({command:function(e){var t={row:{insert:I,"delete":k,merge:z,split:M},column:{insert:R,"delete":A,merge:N,split:M}};return e=o(e,this.options),e.action=e.action||"insert",new t[e.type][e.action](e)},initialize:function(e,t){m.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var n=!C.isFormatted(t);e.toggleClass("k-state-disabled",n)}});o(n.ui.editor,{PopupTool:T,TableCommand:v,InsertTableTool:S,TableModificationTool:H,InsertRowCommand:I,InsertColumnCommand:R,DeleteRowCommand:k,DeleteColumnCommand:A,MergeCellsHorizontallyCommand:z,MergeCellsVerticallyCommand:N,SplitCellCommand:M}),b("createTable",new S({template:new u({template:s.buttonTemplate,popup:!0,title:"Create table"})})),b("addColumnLeft",new H({type:"column",position:"before",template:new u({template:s.buttonTemplate,title:"Add column on the left"})})),b("addColumnRight",new H({type:"column",template:new u({template:s.buttonTemplate,title:"Add column on the right"})})),b("addRowAbove",new H({type:"row",position:"before",template:new u({template:s.buttonTemplate,title:"Add row above"})})),b("addRowBelow",new H({type:"row",template:new u({template:s.buttonTemplate,title:"Add row below"})})),b("deleteRow",new H({type:"row",action:"delete",template:new u({template:s.buttonTemplate,title:"Delete row"})})),b("deleteColumn",new H({type:"column",action:"delete",template:new u({template:s.buttonTemplate,title:"Delete column"})})),b("mergeCellsHorizontally",new H({type:"row",action:"merge",template:new u({template:s.buttonTemplate,title:"Merge Cell Right"})})),b("mergeCellsVertically",new H({type:"column",action:"merge",template:new u({template:s.buttonTemplate,title:"Merge Cell Down"})})),b("splitCellHorizontally",new H({type:"row",action:"split",template:new u({template:s.buttonTemplate,title:"Split Cell"})})),b("splitCellVertically",new H({type:"column",action:"split",template:new u({template:s.buttonTemplate,title:"Split Cell"})}))}(window.kendo.jQuery)},n(3))},971:function(e,t){e.exports=require("./insert")}});